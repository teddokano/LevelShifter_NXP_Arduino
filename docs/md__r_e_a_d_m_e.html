<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LevelShifter_NXP_Arduino: LevelShifter_NXP_Arduino</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LevelShifter_NXP_Arduino<span id="projectnumber">&#160;0.9.1</span>
   </div>
   <div id="projectbrief">Temperature sensor device operation sample code for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">LevelShifter_NXP_Arduino</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a>Level shifter (voltage translator) evaluation board sample code for <a href="https://www.arduino.cc">Arduino</a></p>
<blockquote class="doxtable">
<p>&zwj;<b>Note</b> </p>
</blockquote>
<p>This library works with <a href="https://github.com/teddokano/I2C_device_Arduino"><code>I2C_device</code></a>, <a href="https://github.com/teddokano/BusInOut_Arduino"><code>BusInOut_Arduino</code></a>, and <a href="https://github.com/teddokano/Potentiometer_ADI_Arduino"><code>Potentiometer_ADI_Arduino</code></a> libraries together. <br  />
 Please be sure all libraries are imported in your environment before trying to build.</p>
<p><img src="https://github.com/teddokano/additional_files/blob/main/LevelShifter_NXP_Arduino/board.jpg" alt="Boards" class="inline"/> <br  />
 <em>NTS0304EUK-ARD : Arduino® Shield Evaluation Board for Level shifter (voltage translator)</em> <br  />
 <em>Oscilloscope probes are on J8-pin1 and J9-pin1 to measure chip-select signal voltages while the board operated in SPI mode</em></p>
<h1><a class="anchor" id="autotoc_md1"></a>
What is this?</h1>
<p>An Arduino demo code for <b>Level shifter (voltage translator)</b> device evaluation board. <br  />
 This demo code shows NTS0304E operation with changing two side (controller side and target side) signal voltages. <br  />
 The two voltages are supplied from LDOs on the board. This sample code controls those LDOs via GPIO pins. <br  />
</p>
<p>A digital potentiometer:AD5161 is on the board. The sample code communicats with the potentiometer to show its waveform. <br  />
 Use an oscilloscope to find voltage/waveform on the board.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Supported board</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type#   </th><th class="markdownTableHeadNone">Features   </th><th class="markdownTableHeadNone">Evaluation board    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://www.nxp.com/products/analog-and-mixed-signal/voltage-level-translators/4-bit-dual-supply-translating-transceiver-open-drain-auto-direction-sensing:NTS0304E">NTS0304E</a>   </td><td class="markdownTableBodyNone">4-Bit Dual-Supply Translating Transceiver (Open-Drain, Auto-Direction Sensing)   </td><td class="markdownTableBodyNone"><a href="https://www.nxp.com/design/design-center/development-boards/analog-toolbox/arduino-shields-solutions/nts0304euk-ard-level-shifter-evaluation-board:NTS0304EUK-ARD">NTS0304EUK-ARD Level Shifter Evaluation Board</a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md3"></a>
Getting started</h1>
<p>Use Library manager in Arduino IDE for easy install</p>
<h1><a class="anchor" id="autotoc_md4"></a>
What's inside?</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
No class library</h2>
<p>Since the NTS0304E is just a level shifter, no sofware control is needed. <br  />
 So, this repository is <b>NOT</b> containing <code>NTS0304E</code> class library but just a sample demo code. <br  />
</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Examples</h2>
<p>Examples are provided as scketch files.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
How to use? : Full featured demo: <code>NTS0304EUK-ARD_demo</code></h3>
<p><b>NTS0304EUK-ARD_demo</b> is a full featured demo code. <br  />
 After library install, Choose menu on Arduino-IDE: <code>File</code>→<code>Examples</code>→<code>LevelShifter_NXP_Arduino</code>→ NTS0304EUK-ARD_demo</p>
<p>This demo code will show <b>nothing</b> on terminal screen. Since the LDO1 output voltage is controled by D0 and D1 pins, the <code>Serial</code> API to print characters on screen disturbs the behavior. <br  />
 Again, <b>while the demo running, no screen update will be done</b>. <br  />
 <u>To perform output all voltage variation on LDO1, the screen message needed to be disabled.</u> <br  />
 While the demo, prove on the signal lines and monitor the waveform on an oscilloscope. <br  />
</p>
<p>LDO1 and LDO2 can output several voltages. LDO1 voltage becomes the signal voltage on A-side of DUT and LDO2 voltage becomes B-side one. <br  />
</p><ul>
<li>LDO1 (A-side, I²C signals on J8) output can be set 0.95V, 1.2V, 1.8V, 2.5V and 3.3V. <br  />
</li>
<li>LDO2 (B-side, I²C signals on J9) output can be set 1.8V, 2.5V, 3.3V and 4.96V. <br  />
</li>
</ul>
<p>The demo performs I²C/SPI comunication with all combination of two LDO output except condition of "LDO1 &gt; LDO2V".. <br  />
</p>
<p>User can set to show messages while the demo by disabling <code>SERIAL_OUT_DISABLE</code> option (comment-out the line of this word definition). It will show some information on the screen but the voltage on LDO1 is affected. <br  />
</p>
<p>Followings are waveform. Both are ChipSelect line voltage while the program is running in SPI mode, ch1 (yellow) is A-side and ch2 (blue) is B-side. <br  />
 Probes were on JP8(A-side)-pin1 and J9(B-side)-pin1. All possible LDO2 output tried at one LDO1 output level. <br  />
 The demo sets LDO voltages and wait for 1 second to settle. Then I²C or SPI (depends on user setting in the code) communication done to sweep the potentiometer setting from minimum (0x00) to maximun (0xFF). <br  />
 Signal voltages on both side of level shifter can be measured on those pins. <br  />
</p>
<p><img src="https://github.com/teddokano/additional_files/blob/main/LevelShifter_NXP_Arduino/waveform0.png" alt="Waveforms" class="inline"/> <br  />
</p>
<p>Next picture is output voltage by optentiometer. The potentiomenter is configured as volume between 3.3V and GND. The output of wiper pin is buffered by voltage follower buffer and provided on J10. <br  />
 This voltage is measured on pin1 of J10 (pin2 of J10 is GND). <br  />
</p>
<p><img src="https://github.com/teddokano/additional_files/blob/main/LevelShifter_NXP_Arduino/waveform1.png" alt="Waveforms" class="inline"/> <br  />
</p>
<h3><a class="anchor" id="autotoc_md8"></a>
How to use? : Simplified demo: <code>NTS0304EUK-ARD_simple_I2C</code> and <code>NTS0304EUK-ARD_simple_SPI</code></h3>
<p><b>NTS0304EUK-ARD_simple_I2C</b> and <b>NTS0304EUK-ARD_simple_SPI</b> are simplified demo code to give better code visibility and user friendry message on screen. <br  />
 To have terminal screen message, the LDO1 (A-side supply voltage control) is fixed to 0.95V only. <br  />
 The screen message shows read-out value from potentiometer and its output voltage which is routed to A1 pin on Arduino connector. <br  />
</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Related libraries</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Library   </th><th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Target devices   </th><th class="markdownTableHeadNone">Required library    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/GPIO_NXP_Arduino">GPIO_NXP_Arduino</a>   </td><td class="markdownTableBodyNone">GPIO libraries   </td><td class="markdownTableBodyNone">PCAL6408A, PCAL6416A, PCAL6524, PCAL6534, PCA9555, PCA9554   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/LCDDriver_NXP_Arduino">LCDDriver_NXP_Arduino</a>   </td><td class="markdownTableBodyNone">LCD driver libraries   </td><td class="markdownTableBodyNone">PCA8561   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/LEDDriver_NXP_Arduino">LEDDriver_NXP_Arduino</a>   </td><td class="markdownTableBodyNone">LED driver libraries   </td><td class="markdownTableBodyNone">PCA9955B, PCA9956B, PCA9957   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/MUX_SW_NXP_Arduino">MUX_SW_NXP_Arduino</a>   </td><td class="markdownTableBodyNone">I²C mux/switch libraries   </td><td class="markdownTableBodyNone">PCA9846   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/RTC_NXP_Arduino">RTC_NXP_Arduino</a>   </td><td class="markdownTableBodyNone">RTC libraries   </td><td class="markdownTableBodyNone">PCF2131, PCF85063A   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/TempSensor_NXP_Arduino">TempSensor_NXP_Arduino</a>   </td><td class="markdownTableBodyNone">Temperature sensor libraries   </td><td class="markdownTableBodyNone">LM75B, PCT2075, P3T1085   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>   </td><td class="markdownTableBodyNone">Base library for I²C operations   </td><td class="markdownTableBodyNone">none (can be applied as base class for all I²C targets)   </td><td class="markdownTableBodyNone">&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/BusInOut_Arduino">BusInOut</a>   </td><td class="markdownTableBodyNone">Utility library for IO pin operation   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">&mdash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/teddokano/Potentiometer_ADI_Arduino">Potentiometer_ADI_Arduino</a>   </td><td class="markdownTableBodyNone">Potentiometer library   </td><td class="markdownTableBodyNone">AD5161   </td><td class="markdownTableBodyNone"><a href="https://github.com/teddokano/I2C_device_Arduino">I2C_device_Arduino</a>   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
